<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>安卓学习复习笔记 | O₂</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/6.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">安卓学习复习笔记</h1><a id="logo" href="/.">O₂</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">安卓学习复习笔记</h1><div class="post-meta">Sep 8, 2015<span> | </span><span class="category"><a href="/categories/Android/">Android</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><div class="clear"><div id="toc" class="toc-article"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#进入应用程序主界面"><span class="toc-number">1.</span> <span class="toc-text">进入应用程序主界面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#获取版本号版本名称"><span class="toc-number">2.</span> <span class="toc-text">获取版本号版本名称</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#系统弹窗的使用"><span class="toc-number">3.</span> <span class="toc-text">系统弹窗的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#判断sd卡是否可用，是否挂载上及SD卡路径"><span class="toc-number">4.</span> <span class="toc-text">判断sd卡是否可用，是否挂载上及SD卡路径</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#更新安装apk代码"><span class="toc-number">5.</span> <span class="toc-text">更新安装apk代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#获取SIM卡序列号"><span class="toc-number">6.</span> <span class="toc-text">获取SIM卡序列号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#获取联系人列表"><span class="toc-number">7.</span> <span class="toc-text">获取联系人列表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#移入移出动画"><span class="toc-number">8.</span> <span class="toc-text">移入移出动画</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#图片选择器（普通、高亮）"><span class="toc-number">9.</span> <span class="toc-text">图片选择器（普通、高亮）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#自定义控件属性的添加"><span class="toc-number">10.</span> <span class="toc-text">自定义控件属性的添加</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#获取可用空间的大小"><span class="toc-number">11.</span> <span class="toc-text">获取可用空间的大小</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#卸载应用"><span class="toc-number">12.</span> <span class="toc-text">卸载应用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#开启应用"><span class="toc-number">13.</span> <span class="toc-text">开启应用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#发送短信"><span class="toc-number">14.</span> <span class="toc-text">发送短信</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#动画集合（缩放，透明）"><span class="toc-number">15.</span> <span class="toc-text">动画集合（缩放，透明）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ListView的使用（复用）"><span class="toc-number">16.</span> <span class="toc-text">ListView的使用（复用）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#代码更改布局位置处理"><span class="toc-number">17.</span> <span class="toc-text">代码更改布局位置处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#获取系统联系人"><span class="toc-number">18.</span> <span class="toc-text">获取系统联系人</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#基类手势控制-上一页下一页"><span class="toc-number">19.</span> <span class="toc-text">基类手势控制 上一页下一页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#手机震动"><span class="toc-number">20.</span> <span class="toc-text">手机震动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#播放声音"><span class="toc-number">21.</span> <span class="toc-text">播放声音</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#文本抖动效果"><span class="toc-number">22.</span> <span class="toc-text">文本抖动效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#获取手机所有应用相关信息"><span class="toc-number">23.</span> <span class="toc-text">获取手机所有应用相关信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#九宫格GridView"><span class="toc-number">24.</span> <span class="toc-text">九宫格GridView</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#获取空间内存（运存）大小"><span class="toc-number">25.</span> <span class="toc-text">获取空间内存（运存）大小</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#判断服务是否开启"><span class="toc-number">26.</span> <span class="toc-text">判断服务是否开启</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#多击事件"><span class="toc-number">27.</span> <span class="toc-text">多击事件</span></a></li></ol></div></div><div class="post-content"><h3 id="进入应用程序主界面"><a href="#进入应用程序主界面" class="headerlink" title="进入应用程序主界面"></a>进入应用程序主界面</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 进入应用程序主界面</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">enterHome</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Intent intent = <span class="keyword">new</span> Intent(<span class="keyword">this</span>,HomeActivity.class);</span><br><span class="line">	startActivity(intent);</span><br><span class="line">	<span class="comment">//在开启一个新的界面后,将导航界面关闭(导航界面只可见一次)</span></span><br><span class="line">	finish();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="获取版本号版本名称"><a href="#获取版本号版本名称" class="headerlink" title="获取版本号版本名称"></a>获取版本号版本名称</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 返回版本号</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span>	</span></span><br><span class="line"><span class="comment">	 * 			非0 则代表获取成功</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">getVersionCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">//1,包管理者对象packageManager</span></span><br><span class="line">		PackageManager pm = getPackageManager();</span><br><span class="line">		<span class="comment">//2,从包的管理者对象中,获取指定包名的基本信息(版本名称,版本号),传0代表获取基本信息</span></span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			PackageInfo packageInfo = pm.getPackageInfo(getPackageName(), <span class="number">0</span>);</span><br><span class="line">			<span class="comment">//3,获取版本名称</span></span><br><span class="line">			<span class="keyword">return</span> packageInfo.versionCode;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 获取版本名称:清单文件中</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span>	应用版本名称	返回null代表异常</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> String <span class="title">getVersionName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">//1,包管理者对象packageManager</span></span><br><span class="line">		PackageManager pm = getPackageManager();</span><br><span class="line">		<span class="comment">//2,从包的管理者对象中,获取指定包名的基本信息(版本名称,版本号),传0代表获取基本信息</span></span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			PackageInfo packageInfo = pm.getPackageInfo(getPackageName(), <span class="number">0</span>);</span><br><span class="line">			<span class="comment">//3,获取版本名称</span></span><br><span class="line">			<span class="keyword">return</span> packageInfo.versionName;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h3 id="系统弹窗的使用"><a href="#系统弹窗的使用" class="headerlink" title="系统弹窗的使用"></a>系统弹窗的使用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 弹出对话框,提示用户更新</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">showUpdateDialog</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">//对话框,是依赖于activity存在的</span></span><br><span class="line">		Builder builder = <span class="keyword">new</span> AlertDialog.Builder(<span class="keyword">this</span>);</span><br><span class="line">		<span class="comment">//设置左上角图标</span></span><br><span class="line">		builder.setIcon(R.drawable.ic_launcher);</span><br><span class="line">		builder.setTitle(<span class="string">"版本更新"</span>);</span><br><span class="line">		<span class="comment">//设置描述内容</span></span><br><span class="line">		builder.setMessage(mVersionDes);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//积极按钮,立即更新</span></span><br><span class="line">		builder.setPositiveButton(<span class="string">"立即更新"</span>, <span class="keyword">new</span> DialogInterface.OnClickListener() &#123;</span><br><span class="line">			<span class="meta">@Override</span></span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(DialogInterface dialog, <span class="keyword">int</span> which)</span> </span>&#123;</span><br><span class="line">				<span class="comment">//下载apk,apk链接地址,downloadUrl</span></span><br><span class="line">				downloadApk();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">		</span><br><span class="line">		builder.setNegativeButton(<span class="string">"稍后再说"</span>, <span class="keyword">new</span> DialogInterface.OnClickListener() &#123;</span><br><span class="line">			<span class="meta">@Override</span></span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(DialogInterface dialog, <span class="keyword">int</span> which)</span> </span>&#123;</span><br><span class="line">				<span class="comment">//取消对话框,进入主界面</span></span><br><span class="line">				enterHome();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//点击取消事件监听</span></span><br><span class="line">		builder.setOnCancelListener(<span class="keyword">new</span> DialogInterface.OnCancelListener() &#123;</span><br><span class="line">			<span class="meta">@Override</span></span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCancel</span><span class="params">(DialogInterface dialog)</span> </span>&#123;</span><br><span class="line">				<span class="comment">//即使用户点击取消,也需要让其进入应用程序主界面</span></span><br><span class="line">				enterHome();</span><br><span class="line">				dialog.dismiss();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">		</span><br><span class="line">		builder.show();</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h3 id="判断sd卡是否可用，是否挂载上及SD卡路径"><a href="#判断sd卡是否可用，是否挂载上及SD卡路径" class="headerlink" title="判断sd卡是否可用，是否挂载上及SD卡路径"></a>判断sd卡是否可用，是否挂载上及SD卡路径</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1,判断sd卡是否可用,是否挂在上</span></span><br><span class="line">		<span class="keyword">if</span>(Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED))&#123;</span><br><span class="line">			<span class="comment">//2,获取sd路径</span></span><br><span class="line">			String path = 			Environment.getExternalStorageDirectory().getAbsolutePath()</span><br><span class="line">					+File.separator+<span class="string">"xxx.apk"</span>;</span><br><span class="line">					&#125;</span><br></pre></td></tr></table></figure>
<h3 id="更新安装apk代码"><a href="#更新安装apk代码" class="headerlink" title="更新安装apk代码"></a>更新安装apk代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 安装对应apk</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> file	安装文件</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">installApk</span><span class="params">(File file)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//系统应用界面,源码,安装apk入口</span></span><br><span class="line">		Intent intent = <span class="keyword">new</span> Intent(<span class="string">"android.intent.action.VIEW"</span>);</span><br><span class="line">		intent.addCategory(<span class="string">"android.intent.category.DEFAULT"</span>);</span><br><span class="line">		<span class="comment">/*//文件作为数据源</span></span><br><span class="line"><span class="comment">		intent.setData(Uri.fromFile(file));</span></span><br><span class="line"><span class="comment">		//设置安装的类型</span></span><br><span class="line"><span class="comment">		intent.setType("application/vnd.android.package-archive");*/</span></span><br><span class="line">		intent.setDataAndType(Uri.fromFile(file),<span class="string">"application/vnd.android.package-archive"</span>);</span><br><span class="line"><span class="comment">//		startActivity(intent);</span></span><br><span class="line">		startActivityForResult(intent, <span class="number">0</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//开启一个activity后,返回结果调用的方法 取消安装的回掉</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onActivityResult</span><span class="params">(<span class="keyword">int</span> requestCode, <span class="keyword">int</span> resultCode, Intent data)</span> </span>&#123;</span><br><span class="line">		enterHome();</span><br><span class="line">		<span class="keyword">super</span>.onActivityResult(requestCode, resultCode, data);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h3 id="获取SIM卡序列号"><a href="#获取SIM卡序列号" class="headerlink" title="获取SIM卡序列号"></a>获取SIM卡序列号</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取sim卡序列号TelephoneManager</span></span><br><span class="line">TelephonyManager manager = (TelephonyManager)</span><br><span class="line">								getSystemService(Context.TELEPHONY_SERVICE);</span><br><span class="line">		</span><br><span class="line">String simSerialNumber = manager.getSimSerialNumber();</span><br></pre></td></tr></table></figure>
<h3 id="获取联系人列表"><a href="#获取联系人列表" class="headerlink" title="获取联系人列表"></a>获取联系人列表</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> android.app.Activity;</span><br><span class="line"><span class="keyword">import</span> android.content.ContentResolver;</span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.database.Cursor;</span><br><span class="line"><span class="keyword">import</span> android.net.Uri;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.os.Handler;</span><br><span class="line"><span class="keyword">import</span> android.text.TextUtils;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.view.ViewGroup;</span><br><span class="line"><span class="keyword">import</span> android.widget.AdapterView;</span><br><span class="line"><span class="keyword">import</span> android.widget.AdapterView.OnItemClickListener;</span><br><span class="line"><span class="keyword">import</span> android.widget.BaseAdapter;</span><br><span class="line"><span class="keyword">import</span> android.widget.ListView;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ContactListActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> </span>&#123;</span><br><span class="line">	<span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">final</span> String tag = <span class="string">"ContactListActivity"</span>;</span><br><span class="line">	<span class="keyword">private</span> ListView lv_contact;</span><br><span class="line">	<span class="keyword">private</span> List&lt;HashMap&lt;String,String&gt;&gt; contactList = <span class="keyword">new</span> ArrayList&lt;HashMap&lt;String,String&gt;&gt;();</span><br><span class="line">	<span class="keyword">private</span> MyAdapter mAdapter;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> Handler mHandler = <span class="keyword">new</span> Handler()&#123;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(android.os.Message msg)</span> </span>&#123;</span><br><span class="line">			<span class="comment">//8,填充数据适配器</span></span><br><span class="line">			</span><br><span class="line">			mAdapter = <span class="keyword">new</span> MyAdapter();</span><br><span class="line">			lv_contact.setAdapter(mAdapter);</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">		setContentView(R.layout.activity_contact_list);</span><br><span class="line">		</span><br><span class="line">		initUI();</span><br><span class="line">		initData();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="class"><span class="keyword">class</span> <span class="title">MyAdapter</span> <span class="keyword">extends</span> <span class="title">BaseAdapter</span></span>&#123;</span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> contactList.size();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">		<span class="function"><span class="keyword">public</span> HashMap&lt;String, String&gt; <span class="title">getItem</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> contactList.get(position);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getItemId</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> position;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">		<span class="function"><span class="keyword">public</span> View <span class="title">getView</span><span class="params">(<span class="keyword">int</span> position, View convertView, ViewGroup parent)</span> </span>&#123;</span><br><span class="line">			View view = View.inflate(getApplicationContext(), R.layout.listview_contact_item, <span class="keyword">null</span>);</span><br><span class="line">			</span><br><span class="line">			TextView tv_name = (TextView) view.findViewById(R.id.tv_name);</span><br><span class="line">			TextView tv_phone = (TextView) view.findViewById(R.id.tv_phone);</span><br><span class="line">			</span><br><span class="line">			tv_name.setText(getItem(position).get(<span class="string">"name"</span>));</span><br><span class="line">			tv_phone.setText(getItem(position).get(<span class="string">"phone"</span>));</span><br><span class="line">			</span><br><span class="line">			<span class="keyword">return</span> view;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 获取系统联系人数据方法</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">//因为读取系统联系人,可能是一个耗时操作,放置到子线程中处理</span></span><br><span class="line">		<span class="keyword">new</span> Thread()&#123;</span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">				<span class="comment">//1,获取内容解析器对象</span></span><br><span class="line">				ContentResolver contentResolver = getContentResolver();</span><br><span class="line">				<span class="comment">//2,做查询系统联系人数据库表过程(读取联系人权限)</span></span><br><span class="line">				Cursor cursor = contentResolver.query(</span><br><span class="line">						Uri.parse(<span class="string">"content://com.android.contacts/raw_contacts"</span>),</span><br><span class="line">						<span class="keyword">new</span> String[]&#123;<span class="string">"contact_id"</span>&#125;, </span><br><span class="line">						<span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">null</span>);</span><br><span class="line">				contactList.clear();</span><br><span class="line">				<span class="comment">//3,循环游标,直到没有数据为止</span></span><br><span class="line">				<span class="keyword">while</span>(cursor.moveToNext())&#123;</span><br><span class="line">					String id = cursor.getString(<span class="number">0</span>);</span><br><span class="line"><span class="comment">//					Log.i(tag, "id = "+id);</span></span><br><span class="line">					<span class="comment">//4,根据用户唯一性id值,查询data表和mimetype表生成的视图,获取data以及mimetype字段</span></span><br><span class="line">					Cursor indexCursor = contentResolver.query(</span><br><span class="line">							Uri.parse(<span class="string">"content://com.android.contacts/data"</span>), </span><br><span class="line">							<span class="keyword">new</span> String[]&#123;<span class="string">"data1"</span>,<span class="string">"mimetype"</span>&#125;, </span><br><span class="line">							<span class="string">"raw_contact_id = ?"</span>, <span class="keyword">new</span> String[]&#123;id&#125;, <span class="keyword">null</span>);</span><br><span class="line">					<span class="comment">//5,循环获取每一个联系人的电话号码以及姓名,数据类型</span></span><br><span class="line">					HashMap&lt;String, String&gt; hashMap = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line">					<span class="keyword">while</span>(indexCursor.moveToNext())&#123;</span><br><span class="line">						String data = indexCursor.getString(<span class="number">0</span>);	</span><br><span class="line">						String type = indexCursor.getString(<span class="number">1</span>);</span><br><span class="line">						</span><br><span class="line">						<span class="comment">//6,区分类型去给hashMap填充数据</span></span><br><span class="line">						<span class="keyword">if</span>(type.equals(<span class="string">"vnd.android.cursor.item/phone_v2"</span>))&#123;</span><br><span class="line">							<span class="comment">//数据非空判断</span></span><br><span class="line">							<span class="keyword">if</span>(!TextUtils.isEmpty(data))&#123;</span><br><span class="line">								hashMap.put(<span class="string">"phone"</span>, data);</span><br><span class="line">							&#125;</span><br><span class="line">						&#125;<span class="keyword">else</span> <span class="keyword">if</span>(type.equals(<span class="string">"vnd.android.cursor.item/name"</span>))&#123;</span><br><span class="line">							<span class="keyword">if</span>(!TextUtils.isEmpty(data))&#123;</span><br><span class="line">								hashMap.put(<span class="string">"name"</span>, data);</span><br><span class="line">							&#125;</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">					indexCursor.close();</span><br><span class="line">					contactList.add(hashMap);</span><br><span class="line">				&#125;</span><br><span class="line">				cursor.close();</span><br><span class="line">				<span class="comment">//7,消息机制,发送一个空的消息,告知主线程可以去使用子线程已经填充好的数据集合</span></span><br><span class="line">				mHandler.sendEmptyMessage(<span class="number">0</span>);</span><br><span class="line">			&#125;;</span><br><span class="line">		&#125;.start();</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initUI</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		lv_contact = (ListView) findViewById(R.id.lv_contact);</span><br><span class="line">		lv_contact.setOnItemClickListener(<span class="keyword">new</span> OnItemClickListener() &#123;</span><br><span class="line">			<span class="meta">@Override</span></span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onItemClick</span><span class="params">(AdapterView&lt;?&gt; parent, View view,<span class="keyword">int</span> position, <span class="keyword">long</span> id)</span> </span>&#123;</span><br><span class="line">				<span class="comment">//1,获取点中条目的索引指向集合中的对象</span></span><br><span class="line">				<span class="keyword">if</span>(mAdapter!=<span class="keyword">null</span>)&#123;</span><br><span class="line">					HashMap&lt;String, String&gt; hashMap = mAdapter.getItem(position);</span><br><span class="line">					<span class="comment">//2,获取当前条目指向集合对应的电话号码</span></span><br><span class="line">					String phone = hashMap.get(<span class="string">"phone"</span>);</span><br><span class="line">					<span class="comment">//3,此电话号码需要给第三个导航界面使用</span></span><br><span class="line">					</span><br><span class="line">					<span class="comment">//4,在结束此界面回到前一个导航界面的时候,需要将数据返回过去</span></span><br><span class="line">					Intent intent = <span class="keyword">new</span> Intent();</span><br><span class="line">					intent.putExtra(<span class="string">"phone"</span>, phone);</span><br><span class="line">					setResult(<span class="number">0</span>, intent);</span><br><span class="line">					</span><br><span class="line">					finish();</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="移入移出动画"><a href="#移入移出动画" class="headerlink" title="移入移出动画"></a>移入移出动画</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//动画XML创建 res/anim/xxx.xml</span></span><br><span class="line"><span class="comment">//next_in_anim.xml</span></span><br><span class="line">&lt;translate</span><br><span class="line">    xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    android:fromXDelta=<span class="string">"100%p"</span></span><br><span class="line">    android:toXDelta=<span class="string">"0"</span></span><br><span class="line">    android:duration=<span class="string">"500"</span>&gt;</span><br><span class="line">&lt;/translate&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//next_out_anim.xml</span></span><br><span class="line">&lt;translate</span><br><span class="line">    xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    android:fromXDelta=<span class="string">"0"</span></span><br><span class="line">    android:toXDelta=<span class="string">"-100%p"</span></span><br><span class="line">    android:duration=<span class="string">"500"</span>&gt;</span><br><span class="line">&lt;/translate&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//pre_in_anim.xml</span></span><br><span class="line">&lt;!-- -<span class="number">100</span>%p 负一屏幕的宽度大小值 --&gt;</span><br><span class="line">&lt;translate</span><br><span class="line">    xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    android:fromXDelta=<span class="string">"-100%p"</span></span><br><span class="line">    android:toXDelta=<span class="string">"0"</span></span><br><span class="line">    android:duration=<span class="string">"500"</span>&gt;</span><br><span class="line">&lt;/translate&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//pre_out_anim.xml</span></span><br><span class="line">&lt;translate</span><br><span class="line">    xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></span><br><span class="line">    android:fromXDelta=<span class="string">"0"</span></span><br><span class="line">    android:toXDelta=<span class="string">"100%p"</span></span><br><span class="line">    android:duration=<span class="string">"500"</span>&gt;</span><br><span class="line">&lt;/translate&gt;</span><br><span class="line"></span><br><span class="line">overridePendingTransition(R.anim.next_in_anim, R.anim.next_out_anim);</span><br></pre></td></tr></table></figure>
<h3 id="图片选择器（普通、高亮）"><a href="#图片选择器（普通、高亮）" class="headerlink" title="图片选择器（普通、高亮）"></a>图片选择器（普通、高亮）</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//selector xml 创建res/drawable/selector_xxx_xxx.xml</span></span><br><span class="line">&lt;selector xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span> &gt;</span><br><span class="line">    &lt;!-- 选中深绿色图片 --&gt;</span><br><span class="line">	&lt;item android:state_pressed=<span class="string">"true"</span>	android:drawable=<span class="string">"@drawable/function_greenbutton_pressed"</span>/&gt;</span><br><span class="line">	&lt;!-- 浅绿色的图片 --&gt;</span><br><span class="line">	&lt;item android:drawable=<span class="string">"@drawable/function_greenbutton_normal"</span>/&gt;</span><br><span class="line">&lt;/selector&gt;</span><br></pre></td></tr></table></figure>
<h3 id="自定义控件属性的添加"><a href="#自定义控件属性的添加" class="headerlink" title="自定义控件属性的添加"></a>自定义控件属性的添加</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//attrs.xml创建  res/values/attrs.xml</span></span><br><span class="line">&lt;resources&gt;</span><br><span class="line">    &lt;declare-styleable name=<span class="string">"com.xxx.view.SettingItemView"</span>&gt;</span><br><span class="line">		&lt;attr name=<span class="string">"destitle"</span> format=<span class="string">"string"</span>/&gt;</span><br><span class="line">		&lt;attr name=<span class="string">"desoff"</span> format=<span class="string">"string"</span>/&gt;</span><br><span class="line">		&lt;attr name=<span class="string">"deson"</span> format=<span class="string">"string"</span>/&gt;</span><br><span class="line">	&lt;/declare-styleable&gt;</span><br><span class="line">&lt;/resources&gt;</span><br></pre></td></tr></table></figure>
<h3 id="获取可用空间的大小"><a href="#获取可用空间的大小" class="headerlink" title="获取可用空间的大小"></a>获取可用空间的大小</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//1,获取磁盘(内存,区分于手机运行内存)可用大小,磁盘路径</span></span><br><span class="line">		String path = Environment.getDataDirectory().getAbsolutePath();</span><br><span class="line">		<span class="comment">//2,获取sd卡可用大小,sd卡路径</span></span><br><span class="line">		String sdPath = Environment.getExternalStorageDirectory().getAbsolutePath();</span><br><span class="line">		<span class="comment">//3,获取以上两个路径下文件夹的可用大小</span></span><br><span class="line">		String memoryAvailSpace = Formatter.formatFileSize(<span class="keyword">this</span>, getAvailSpace(path));</span><br><span class="line">		String sdMemoryAvailSpace = Formatter.formatFileSize(<span class="keyword">this</span>,getAvailSpace(sdPath));</span><br><span class="line"></span><br><span class="line"><span class="comment">//int代表多少个G	</span></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 返回值结果单位为byte = 8bit,最大结果为2147483647 bytes</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> path</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span>	返回指定路径可用区域的byte类型值</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">long</span> <span class="title">getAvailSpace</span><span class="params">(String path)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//获取可用磁盘大小类</span></span><br><span class="line">		StatFs statFs = <span class="keyword">new</span> StatFs(path);</span><br><span class="line">		<span class="comment">//获取可用区块的个数</span></span><br><span class="line">		<span class="keyword">long</span> count = statFs.getAvailableBlocks();</span><br><span class="line">		<span class="comment">//获取区块的大小</span></span><br><span class="line">		<span class="keyword">long</span> size = statFs.getBlockSize();</span><br><span class="line">		<span class="comment">//区块大小*可用区块个数 == 可用空间大小</span></span><br><span class="line">		<span class="keyword">return</span> count*size;</span><br><span class="line"><span class="comment">//		Integer.MAX_VALUE	代表int类型数据的最大大小</span></span><br><span class="line"><span class="comment">//		0x7FFFFFFF</span></span><br><span class="line"><span class="comment">//		</span></span><br><span class="line"><span class="comment">//		2147483647bytes/1024 =  2096128 KB</span></span><br><span class="line"><span class="comment">//		2096128KB/1024 = 2047	MB</span></span><br><span class="line"><span class="comment">//		2047MB = 2G</span></span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<h3 id="卸载应用"><a href="#卸载应用" class="headerlink" title="卸载应用"></a>卸载应用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Intent intent = <span class="keyword">new</span> Intent(<span class="string">"android.intent.action.DELETE"</span>);</span><br><span class="line">intent.addCategory(<span class="string">"android.intent.category.DEFAULT"</span>);</span><br><span class="line">intent.setData(Uri.parse(<span class="string">"package:"</span>+mAppInfo.getPackageName()));</span><br><span class="line">startActivity(intent);</span><br></pre></td></tr></table></figure>
<h3 id="开启应用"><a href="#开启应用" class="headerlink" title="开启应用"></a>开启应用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通过桌面去启动指定包名应用</span></span><br><span class="line">PackageManager pm = getPackageManager();</span><br><span class="line"><span class="comment">//通过Launch开启制定包名的意图,去开启应用</span></span><br><span class="line">Intent launchIntentForPackage = pm.getLaunchIntentForPackage(mAppInfo.getPackageName());</span><br><span class="line"><span class="keyword">if</span>(launchIntentForPackage!=<span class="keyword">null</span>)&#123;</span><br><span class="line">    startActivity(launchIntentForPackage);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    ToastUtil.show(getApplicationContext(), <span class="string">"此应用不能被开启"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="发送短信"><a href="#发送短信" class="headerlink" title="发送短信"></a>发送短信</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Intent intent = <span class="keyword">new</span> Intent(Intent.ACTION_SEND);</span><br><span class="line">intent.putExtra(Intent.EXTRA_TEXT,<span class="string">"分享一个应用,应用名称为"</span>+mAppInfo.getName());</span><br><span class="line">intent.setType(<span class="string">"text/plain"</span>);</span><br><span class="line">startActivity(intent);</span><br></pre></td></tr></table></figure>
<h3 id="动画集合（缩放，透明）"><a href="#动画集合（缩放，透明）" class="headerlink" title="动画集合（缩放，透明）"></a>动画集合（缩放，透明）</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//透明动画(透明---&gt;不透明)</span></span><br><span class="line">AlphaAnimation alphaAnimation = <span class="keyword">new</span> AlphaAnimation(<span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">alphaAnimation.setDuration(<span class="number">1000</span>);</span><br><span class="line">alphaAnimation.setFillAfter(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//缩放动画</span></span><br><span class="line">ScaleAnimation scaleAnimation = <span class="keyword">new</span> ScaleAnimation(</span><br><span class="line">      <span class="number">0</span>, <span class="number">1</span>, </span><br><span class="line">      <span class="number">0</span>, <span class="number">1</span>, </span><br><span class="line">      Animation.RELATIVE_TO_SELF, <span class="number">0.5f</span>, </span><br><span class="line">      Animation.RELATIVE_TO_SELF, <span class="number">0.5f</span>);</span><br><span class="line">scaleAnimation.setDuration(<span class="number">1000</span>);</span><br><span class="line">alphaAnimation.setFillAfter(<span class="keyword">true</span>);</span><br><span class="line"><span class="comment">//动画集合Set</span></span><br><span class="line">AnimationSet animationSet = <span class="keyword">new</span> AnimationSet(<span class="keyword">true</span>);</span><br><span class="line"><span class="comment">//添加两个动画</span></span><br><span class="line">animationSet.addAnimation(alphaAnimation);</span><br><span class="line">animationSet.addAnimation(scaleAnimation);</span><br><span class="line"></span><br><span class="line"><span class="comment">//view执行动画</span></span><br><span class="line">view.startAnimation(animationSet);</span><br></pre></td></tr></table></figure>
<h3 id="ListView的使用（复用）"><a href="#ListView的使用（复用）" class="headerlink" title="ListView的使用（复用）"></a>ListView的使用（复用）</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1,复用convertView</span></span><br><span class="line"><span class="comment">//2,对findViewById次数的优化,使用ViewHolder</span></span><br><span class="line"><span class="comment">//3,将ViewHolder定义成静态,不会去创建多个对象</span></span><br><span class="line"><span class="comment">//4,listView如果有多个条目的时候,可以做分页算法,每一次加载20条,逆序返回</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Handler mHandler = <span class="keyword">new</span> Handler()&#123;</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(android.os.Message msg)</span> </span>&#123;</span><br><span class="line">			mAdapter = <span class="keyword">new</span> MyAdapter();</span><br><span class="line">			lv_app_list.setAdapter(mAdapter);</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyAdapter</span> <span class="keyword">extends</span> <span class="title">BaseAdapter</span></span>&#123;</span><br><span class="line">   </span><br><span class="line">   <span class="comment">//获取数据适配器中条目类型的总数,修改成两种(纯文本,图片+文字)</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getViewTypeCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">super</span>.getViewTypeCount()+<span class="number">1</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="comment">//指定索引指向的条目类型,条目类型状态码指定(0(复用系统),1)</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getItemViewType</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(position == <span class="number">0</span> || position == mCustomerList.size()+<span class="number">1</span>)&#123;</span><br><span class="line">         <span class="comment">//返回0,代表纯文本条目的状态码</span></span><br><span class="line">         <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">         <span class="comment">//返回1,代表图片+文本条目状态码</span></span><br><span class="line">         <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="comment">//listView中添加两个描述条目</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> mCustomerList.size()+mSystemList.size()+<span class="number">2</span>;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> AppInfo <span class="title">getItem</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(position == <span class="number">0</span> || position == mCustomerList.size()+<span class="number">1</span>)&#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">         <span class="keyword">if</span>(position&lt;mCustomerList.size()+<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> mCustomerList.get(position-<span class="number">1</span>);</span><br><span class="line">         &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//返回系统应用对应条目的对象</span></span><br><span class="line">            <span class="keyword">return</span> mSystemList.get(position - mCustomerList.size()-<span class="number">2</span>);</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getItemId</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> position;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> View <span class="title">getView</span><span class="params">(<span class="keyword">int</span> position, View convertView, ViewGroup parent)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">int</span> type = getItemViewType(position);</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">if</span>(type == <span class="number">0</span>)&#123;</span><br><span class="line">         <span class="comment">//展示灰色纯文本条目</span></span><br><span class="line">         ViewTitleHolder holder = <span class="keyword">null</span>;</span><br><span class="line">         <span class="keyword">if</span>(convertView == <span class="keyword">null</span>)&#123;</span><br><span class="line">            convertView = View.inflate(getApplicationContext(), R.layout.listview_app_item_title, <span class="keyword">null</span>);</span><br><span class="line">            holder = <span class="keyword">new</span> ViewTitleHolder();</span><br><span class="line">            holder.tv_title = (TextView)convertView.findViewById(R.id.tv_title);</span><br><span class="line">            convertView.setTag(holder);</span><br><span class="line">         &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            holder = (ViewTitleHolder) convertView.getTag();</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">if</span>(position == <span class="number">0</span>)&#123;</span><br><span class="line">            holder.tv_title.setText(<span class="string">"用户应用("</span>+mCustomerList.size()+<span class="string">")"</span>);</span><br><span class="line">         &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            holder.tv_title.setText(<span class="string">"系统应用("</span>+mSystemList.size()+<span class="string">")"</span>);</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">return</span> convertView;</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">         <span class="comment">//展示图片+文字条目</span></span><br><span class="line">         ViewHolder holder = <span class="keyword">null</span>;</span><br><span class="line">         <span class="keyword">if</span>(convertView == <span class="keyword">null</span>)&#123;</span><br><span class="line">            convertView = View.inflate(getApplicationContext(), R.layout.listview_app_item, <span class="keyword">null</span>);</span><br><span class="line">            holder = <span class="keyword">new</span> ViewHolder();</span><br><span class="line">            holder.iv_icon = (ImageView)convertView.findViewById(R.id.iv_icon);</span><br><span class="line">            holder.tv_name = (TextView)convertView.findViewById(R.id.tv_name);</span><br><span class="line">            holder.tv_path = (TextView) convertView.findViewById(R.id.tv_path);</span><br><span class="line">            convertView.setTag(holder);</span><br><span class="line">         &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            holder = (ViewHolder) convertView.getTag();</span><br><span class="line">         &#125;</span><br><span class="line">         holder.iv_icon.setBackgroundDrawable(getItem(position).icon);</span><br><span class="line">         holder.tv_name.setText(getItem(position).name);</span><br><span class="line">         <span class="keyword">if</span>(getItem(position).isSdCard)&#123;</span><br><span class="line">            holder.tv_path.setText(<span class="string">"sd卡应用"</span>);</span><br><span class="line">         &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            holder.tv_path.setText(<span class="string">"手机应用"</span>);</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">return</span> convertView;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ViewHolder</span></span>&#123;</span><br><span class="line">   ImageView iv_icon;</span><br><span class="line">   TextView tv_name;</span><br><span class="line">   TextView tv_path;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ViewTitleHolder</span></span>&#123;</span><br><span class="line">   TextView tv_title;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		lv_app_list = (ListView) findViewById(R.id.lv_app_list);</span><br><span class="line">		tv_des = (TextView) findViewById(R.id.tv_des);</span><br><span class="line"></span><br><span class="line">  		<span class="comment">//悬浮设置</span></span><br><span class="line">  		lv_app_list.setOnScrollListener(<span class="keyword">new</span> OnScrollListener() &#123;</span><br><span class="line">			<span class="meta">@Override</span></span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onScrollStateChanged</span><span class="params">(AbsListView view, <span class="keyword">int</span> scrollState)</span> </span>&#123;</span><br><span class="line">				</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">			<span class="meta">@Override</span></span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onScroll</span><span class="params">(AbsListView view, <span class="keyword">int</span> firstVisibleItem,</span></span></span><br><span class="line"><span class="function"><span class="params">					<span class="keyword">int</span> visibleItemCount, <span class="keyword">int</span> totalItemCount)</span> </span>&#123;</span><br><span class="line">				<span class="comment">//滚动过程中调用方法</span></span><br><span class="line">				<span class="comment">//AbsListView中view就是listView对象</span></span><br><span class="line">				<span class="comment">//firstVisibleItem第一个可见条目索引值</span></span><br><span class="line">				<span class="comment">//visibleItemCount当前一个屏幕的可见条目数</span></span><br><span class="line">				<span class="comment">//总共条目总数</span></span><br><span class="line">				<span class="keyword">if</span>(mCustomerList!=<span class="keyword">null</span> &amp;&amp; mSystemList!=<span class="keyword">null</span>)&#123;</span><br><span class="line">					<span class="keyword">if</span>(firstVisibleItem&gt;=mCustomerList.size()+<span class="number">1</span>)&#123;</span><br><span class="line">						<span class="comment">//滚动到了系统条目</span></span><br><span class="line">						tv_des.setText(<span class="string">"系统应用("</span>+mSystemList.size()+<span class="string">")"</span>);</span><br><span class="line">					&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">						<span class="comment">//滚动到了用户应用条目</span></span><br><span class="line">						tv_des.setText(<span class="string">"用户应用("</span>+mCustomerList.size()+<span class="string">")"</span>);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">				</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">		</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>###拖拽跟随移动的处理</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//监听某一个控件的拖拽过程(按下(1),移动(多次),抬起(1))</span></span><br><span class="line">iv_drag.setOnTouchListener(<span class="keyword">new</span> OnTouchListener() &#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> startX;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> startY;</span><br><span class="line">   <span class="comment">//对不同的事件做不同的逻辑处理</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onTouch</span><span class="params">(View v, MotionEvent event)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">switch</span> (event.getAction()) &#123;</span><br><span class="line">      <span class="keyword">case</span> MotionEvent.ACTION_DOWN:</span><br><span class="line">         startX = (<span class="keyword">int</span>) event.getRawX();</span><br><span class="line">         startY = (<span class="keyword">int</span>) event.getRawY();</span><br><span class="line">         <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> MotionEvent.ACTION_MOVE:</span><br><span class="line">         <span class="keyword">int</span> moveX = (<span class="keyword">int</span>) event.getRawX();</span><br><span class="line">         <span class="keyword">int</span> moveY = (<span class="keyword">int</span>) event.getRawY();</span><br><span class="line">         </span><br><span class="line">         <span class="keyword">int</span> disX = moveX-startX;</span><br><span class="line">         <span class="keyword">int</span> disY = moveY-startY;</span><br><span class="line">         </span><br><span class="line">         <span class="comment">//1,当前控件所在屏幕的(左,上)角的位置</span></span><br><span class="line">         <span class="keyword">int</span> left = iv_drag.getLeft()+disX;<span class="comment">//左侧坐标</span></span><br><span class="line">         <span class="keyword">int</span> top = iv_drag.getTop()+disY;<span class="comment">//顶端坐标</span></span><br><span class="line">         <span class="keyword">int</span> right = iv_drag.getRight()+disX;<span class="comment">//右侧坐标</span></span><br><span class="line">         <span class="keyword">int</span> bottom = iv_drag.getBottom()+disY;<span class="comment">//底部坐标</span></span><br><span class="line">         </span><br><span class="line">         <span class="comment">//容错处理(iv_drag不能拖拽出手机屏幕)</span></span><br><span class="line">         <span class="comment">//左边缘不能超出屏幕</span></span><br><span class="line">         <span class="keyword">if</span>(left&lt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">         &#125;</span><br><span class="line">         </span><br><span class="line">         <span class="comment">//右边边缘不能超出屏幕</span></span><br><span class="line">         <span class="keyword">if</span>(right&gt;mScreenWidth)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">         &#125;</span><br><span class="line">         </span><br><span class="line">         <span class="comment">//上边缘不能超出屏幕可现实区域</span></span><br><span class="line">         <span class="keyword">if</span>(top&lt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">         &#125;</span><br><span class="line">         </span><br><span class="line">         <span class="comment">//下边缘(屏幕的高度-22 = 底边缘显示最大值)</span></span><br><span class="line">         <span class="keyword">if</span>(bottom&gt;mScreenHeight - <span class="number">22</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">         &#125;</span><br><span class="line">         </span><br><span class="line">         <span class="keyword">if</span>(top&gt;mScreenHeight/<span class="number">2</span>)&#123;</span><br><span class="line">            bt_bottom.setVisibility(View.INVISIBLE);</span><br><span class="line">            bt_top.setVisibility(View.VISIBLE);</span><br><span class="line">         &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            bt_bottom.setVisibility(View.VISIBLE);</span><br><span class="line">            bt_top.setVisibility(View.INVISIBLE);</span><br><span class="line">         &#125;</span><br><span class="line">         </span><br><span class="line">         <span class="comment">//2,告知移动的控件,按计算出来的坐标去做展示</span></span><br><span class="line">         iv_drag.layout(left, top, right, bottom);</span><br><span class="line">         </span><br><span class="line">         <span class="comment">//3,重置一次其实坐标</span></span><br><span class="line">         startX = (<span class="keyword">int</span>) event.getRawX();</span><br><span class="line">         startY = (<span class="keyword">int</span>) event.getRawY();</span><br><span class="line">         </span><br><span class="line">         <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> MotionEvent.ACTION_UP:</span><br><span class="line">         <span class="comment">//4,存储移动到的位置</span></span><br><span class="line">         SpUtil.putInt(getApplicationContext(), ConstantValue.LOCATION_X, iv_drag.getLeft());</span><br><span class="line">         SpUtil.putInt(getApplicationContext(), ConstantValue.LOCATION_Y, iv_drag.getTop());</span><br><span class="line">         <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//在当前的情况下返回false不响应事件,返回true才会响应事件</span></span><br><span class="line">      </span><br><span class="line">      <span class="comment">//既要响应点击事件,又要响应拖拽过程,则此返回值结果需要修改为false</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="代码更改布局位置处理"><a href="#代码更改布局位置处理" class="headerlink" title="代码更改布局位置处理"></a>代码更改布局位置处理</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取屏幕宽高</span></span><br><span class="line">mWM = (WindowManager) getSystemService(WINDOW_SERVICE);</span><br><span class="line">mScreenHeight = mWM.getDefaultDisplay().getHeight();</span><br><span class="line">mScreenWidth = mWM.getDefaultDisplay().getWidth();</span><br><span class="line"></span><br><span class="line"><span class="comment">//左上角坐标作用在iv_drag上</span></span><br><span class="line"><span class="comment">//iv_drag在相对布局中,所以其所在位置的规则需要由相对布局提供</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//指定宽高都为WRAP_CONTENT</span></span><br><span class="line">LayoutParams layoutParams = <span class="keyword">new</span> RelativeLayout.LayoutParams(</span><br><span class="line">      RelativeLayout.LayoutParams.WRAP_CONTENT, </span><br><span class="line">      RelativeLayout.LayoutParams.WRAP_CONTENT);</span><br><span class="line"><span class="comment">//将左上角的坐标作用在iv_drag对应规则参数上</span></span><br><span class="line">layoutParams.leftMargin = locationX;</span><br><span class="line">layoutParams.topMargin = locationY;</span><br><span class="line"><span class="comment">//将以上规则作用在iv_drag上</span></span><br><span class="line">iv_drag.setLayoutParams(layoutParams);</span><br></pre></td></tr></table></figure>
<h3 id="获取系统联系人"><a href="#获取系统联系人" class="headerlink" title="获取系统联系人"></a>获取系统联系人</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 获取系统联系人数据方法</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="comment">//因为读取系统联系人,可能是一个耗时操作,放置到子线程中处理</span></span><br><span class="line">      <span class="keyword">new</span> Thread()&#123;</span><br><span class="line">         <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="comment">//1,获取内容解析器对象</span></span><br><span class="line">            ContentResolver contentResolver = getContentResolver();</span><br><span class="line">            <span class="comment">//2,做查询系统联系人数据库表过程(读取联系人权限)</span></span><br><span class="line">            Cursor cursor = contentResolver.query(</span><br><span class="line">                  Uri.parse(<span class="string">"content://com.android.contacts/raw_contacts"</span>),</span><br><span class="line">                  <span class="keyword">new</span> String[]&#123;<span class="string">"contact_id"</span>&#125;, </span><br><span class="line">                  <span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">null</span>);</span><br><span class="line">            contactList.clear();</span><br><span class="line">            <span class="comment">//3,循环游标,直到没有数据为止</span></span><br><span class="line">            <span class="keyword">while</span>(cursor.moveToNext())&#123;</span><br><span class="line">               String id = cursor.getString(<span class="number">0</span>);</span><br><span class="line"><span class="comment">//             Log.i(tag, "id = "+id);</span></span><br><span class="line">               <span class="comment">//4,根据用户唯一性id值,查询data表和mimetype表生成的视图,获取data以及mimetype字段</span></span><br><span class="line">               Cursor indexCursor = contentResolver.query(</span><br><span class="line">                     Uri.parse(<span class="string">"content://com.android.contacts/data"</span>), </span><br><span class="line">                     <span class="keyword">new</span> String[]&#123;<span class="string">"data1"</span>,<span class="string">"mimetype"</span>&#125;, </span><br><span class="line">                     <span class="string">"raw_contact_id = ?"</span>, <span class="keyword">new</span> String[]&#123;id&#125;, <span class="keyword">null</span>);</span><br><span class="line">               <span class="comment">//5,循环获取每一个联系人的电话号码以及姓名,数据类型</span></span><br><span class="line">               HashMap&lt;String, String&gt; hashMap = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line">               <span class="keyword">while</span>(indexCursor.moveToNext())&#123;</span><br><span class="line">                  String data = indexCursor.getString(<span class="number">0</span>);    </span><br><span class="line">                  String type = indexCursor.getString(<span class="number">1</span>);</span><br><span class="line">                  </span><br><span class="line">                  <span class="comment">//6,区分类型去给hashMap填充数据</span></span><br><span class="line">                  <span class="keyword">if</span>(type.equals(<span class="string">"vnd.android.cursor.item/phone_v2"</span>))&#123;</span><br><span class="line">                     <span class="comment">//数据非空判断</span></span><br><span class="line">                     <span class="keyword">if</span>(!TextUtils.isEmpty(data))&#123;</span><br><span class="line">                        hashMap.put(<span class="string">"phone"</span>, data);</span><br><span class="line">                     &#125;</span><br><span class="line">                  &#125;<span class="keyword">else</span> <span class="keyword">if</span>(type.equals(<span class="string">"vnd.android.cursor.item/name"</span>))&#123;</span><br><span class="line">                     <span class="keyword">if</span>(!TextUtils.isEmpty(data))&#123;</span><br><span class="line">                        hashMap.put(<span class="string">"name"</span>, data);</span><br><span class="line">                     &#125;</span><br><span class="line">                  &#125;</span><br><span class="line">               &#125;</span><br><span class="line">               indexCursor.close();</span><br><span class="line">               contactList.add(hashMap);</span><br><span class="line">            &#125;</span><br><span class="line">            cursor.close();</span><br><span class="line">            <span class="comment">//7,消息机制,发送一个空的消息,告知主线程可以去使用子线程已经填充好的数据集合</span></span><br><span class="line">            mHandler.sendEmptyMessage(<span class="number">0</span>);</span><br><span class="line">         &#125;;</span><br><span class="line">      &#125;.start();</span><br><span class="line">      </span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h3 id="基类手势控制-上一页下一页"><a href="#基类手势控制-上一页下一页" class="headerlink" title="基类手势控制 上一页下一页"></a>基类手势控制 上一页下一页</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">   </span><br><span class="line">   <span class="comment">//2,创建手势管理的对象,用作管理在onTouchEvent(event)传递过来的手势动作</span></span><br><span class="line">   gestureDetector = <span class="keyword">new</span> GestureDetector(<span class="keyword">this</span>, <span class="keyword">new</span> GestureDetector.SimpleOnGestureListener()&#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onFling</span><span class="params">(MotionEvent e1, MotionEvent e2,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">float</span> velocityX, <span class="keyword">float</span> velocityY)</span> </span>&#123;</span><br><span class="line">         <span class="comment">//监听手势的移动</span></span><br><span class="line">         <span class="keyword">if</span>(e1.getX()-e2.getX()&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="comment">//调用子类的下一页方法,抽象方法</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">//在第一个界面上的时候,跳转到第二个界面</span></span><br><span class="line">            <span class="comment">//在第二个界面上的时候,跳转到第三个界面</span></span><br><span class="line">            <span class="comment">//.......</span></span><br><span class="line">            showNextPage();</span><br><span class="line">         &#125;</span><br><span class="line">         </span><br><span class="line">         <span class="keyword">if</span>(e1.getX()-e2.getX()&lt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="comment">//调用子类的上一页方法</span></span><br><span class="line">            <span class="comment">//在第一个界面上的时候,无响应,空实现</span></span><br><span class="line">            <span class="comment">//在第二个界面上的时候,跳转到第1个界面</span></span><br><span class="line">            <span class="comment">//.......</span></span><br><span class="line">            showPrePage();</span><br><span class="line">         &#125;</span><br><span class="line">         </span><br><span class="line">         <span class="keyword">return</span> <span class="keyword">super</span>.onFling(e1, e2, velocityX, velocityY);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//1,监听屏幕上响应的事件类型(按下(1次),移动(多次),抬起(1次))</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onTouchEvent</span><span class="params">(MotionEvent event)</span> </span>&#123;</span><br><span class="line">   <span class="comment">//3,通过手势处理类,接收多种类型的事件,用作处理</span></span><br><span class="line">   gestureDetector.onTouchEvent(event);</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">super</span>.onTouchEvent(event);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//下一页的抽象方法,由子类决定具体跳转到那个界面</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">showNextPage</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">//上一页的抽象方法,由子类决定具体跳转到那个界面</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">showPrePage</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//点击下一页按钮的时候,根据子类的showNextPage方法做相应跳转</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">nextPage</span><span class="params">(View view)</span></span>&#123;</span><br><span class="line">   showNextPage();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//点击上一页按钮的时候,根据子类的showPrePage方法做相应跳转</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">prePage</span><span class="params">(View view)</span></span>&#123;</span><br><span class="line">   showPrePage();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="手机震动"><a href="#手机震动" class="headerlink" title="手机震动"></a>手机震动</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//手机震动效果(vibrator 震动)</span></span><br><span class="line">Vibrator vibrator = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);</span><br><span class="line"><span class="comment">//震动毫秒值</span></span><br><span class="line">vibrator.vibrate(<span class="number">2000</span>);</span><br><span class="line"><span class="comment">//规律震动(震动规则(不震动时间,震动时间,不震动时间,震动时间.......),重复次数)</span></span><br><span class="line">vibrator.vibrate(<span class="keyword">new</span> <span class="keyword">long</span>[]&#123;<span class="number">2000</span>,<span class="number">5000</span>,<span class="number">2000</span>,<span class="number">5000</span>&#125;, -<span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<h3 id="播放声音"><a href="#播放声音" class="headerlink" title="播放声音"></a>播放声音</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//7,播放音乐(准备音乐,MediaPlayer)</span></span><br><span class="line">MediaPlayer mediaPlayer = MediaPlayer.create(context, R.raw.ylzs);</span><br><span class="line">mediaPlayer.setLooping(<span class="keyword">true</span>);</span><br><span class="line">mediaPlayer.start();</span><br></pre></td></tr></table></figure>
<h3 id="文本抖动效果"><a href="#文本抖动效果" class="headerlink" title="文本抖动效果"></a>文本抖动效果</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//res/anim/shake.xml</span></span><br><span class="line">&lt;translate xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span> </span><br><span class="line">    android:fromXDelta=<span class="string">"0"</span> </span><br><span class="line">    android:toXDelta=<span class="string">"10"</span> </span><br><span class="line">    android:duration=<span class="string">"1000"</span> </span><br><span class="line">    android:interpolator=<span class="string">"@anim/cycle_7"</span> /&gt;</span><br><span class="line">     </span><br><span class="line"><span class="comment">//cycle_7.xml</span></span><br><span class="line">&lt;cycleInterpolator xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span> android:cycles=<span class="string">"7"</span> /&gt;</span><br><span class="line">   </span><br><span class="line">Animation shake = AnimationUtils.loadAnimation(</span><br><span class="line">        getApplicationContext(), R.anim.shake);</span><br><span class="line">et_phone.startAnimation(shake);</span><br></pre></td></tr></table></figure>
<h3 id="获取手机所有应用相关信息"><a href="#获取手机所有应用相关信息" class="headerlink" title="获取手机所有应用相关信息"></a>获取手机所有应用相关信息</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 返回当前手机所有的应用的相关信息(名称,包名,图标,(手机内存,sd卡),(系统,用户));</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> ctx  获取包管理者的上下文环境</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 包含手机安装应用相关信息的集合</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;AppInfo&gt; <span class="title">getAppInfoList</span><span class="params">(Context ctx)</span></span>&#123;</span><br><span class="line">   <span class="comment">//1,包的管理者对象</span></span><br><span class="line">   PackageManager pm = ctx.getPackageManager();</span><br><span class="line">   <span class="comment">//2,获取安装在手机上应用相关信息的集合</span></span><br><span class="line">   List&lt;PackageInfo&gt; packageInfoList = pm.getInstalledPackages(<span class="number">0</span>);</span><br><span class="line">   List&lt;AppInfo&gt; appInfoList = <span class="keyword">new</span> ArrayList&lt;AppInfo&gt;();</span><br><span class="line">   <span class="comment">//3,循环遍历应用信息的集合</span></span><br><span class="line">   <span class="keyword">for</span> (PackageInfo packageInfo : packageInfoList) &#123;</span><br><span class="line">      AppInfo appInfo = <span class="keyword">new</span> AppInfo();</span><br><span class="line">      <span class="comment">//4,获取应用的包名</span></span><br><span class="line">      appInfo.packageName = packageInfo.packageName;</span><br><span class="line">      <span class="comment">//5,应用名称</span></span><br><span class="line">      ApplicationInfo applicationInfo = packageInfo.applicationInfo;</span><br><span class="line">      appInfo.name = applicationInfo.loadLabel(pm).toString();</span><br><span class="line">      <span class="comment">//6,获取图标</span></span><br><span class="line">      appInfo.icon = applicationInfo.loadIcon(pm);</span><br><span class="line">      <span class="comment">//7,判断是否为系统应用(每一个手机上的应用对应的flag都不一致)</span></span><br><span class="line">      <span class="keyword">if</span>((applicationInfo.flags &amp; ApplicationInfo.FLAG_SYSTEM)==ApplicationInfo.FLAG_SYSTEM)&#123;</span><br><span class="line">         <span class="comment">//系统应用</span></span><br><span class="line">         appInfo.isSystem = <span class="keyword">true</span>;</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">         <span class="comment">//非系统应用</span></span><br><span class="line">         appInfo.isSystem = <span class="keyword">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//8,是否为sd卡中安装应用</span></span><br><span class="line">      <span class="keyword">if</span>((applicationInfo.flags &amp; ApplicationInfo.FLAG_EXTERNAL_STORAGE)==ApplicationInfo.FLAG_EXTERNAL_STORAGE)&#123;</span><br><span class="line">         <span class="comment">//系统应用</span></span><br><span class="line">         appInfo.isSdCard = <span class="keyword">true</span>;</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">         <span class="comment">//非系统应用</span></span><br><span class="line">         appInfo.isSdCard = <span class="keyword">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      appInfoList.add(appInfo);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> appInfoList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="九宫格GridView"><a href="#九宫格GridView" class="headerlink" title="九宫格GridView"></a>九宫格GridView</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//GridView</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   <span class="comment">//准备数据(文字(9组),图片(9张))</span></span><br><span class="line">   mTitleStrs = <span class="keyword">new</span> String[]&#123;</span><br><span class="line">         <span class="string">"手机防盗"</span>,<span class="string">"通信卫士"</span>,<span class="string">"软件管理"</span>,<span class="string">"进程管理"</span>,<span class="string">"流量统计"</span>,<span class="string">"手机杀毒"</span>,<span class="string">"缓存清理"</span>,<span class="string">"高级工具"</span>,<span class="string">"设置中心"</span></span><br><span class="line">   &#125;;</span><br><span class="line">   </span><br><span class="line">   mDrawableIds = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;</span><br><span class="line">         R.drawable.home_safe,R.drawable.home_callmsgsafe,</span><br><span class="line">         R.drawable.home_apps,R.drawable.home_taskmanager,</span><br><span class="line">         R.drawable.home_netmanager,R.drawable.home_trojan,</span><br><span class="line">         R.drawable.home_sysoptimize,R.drawable.home_tools,R.drawable.home_settings</span><br><span class="line">   &#125;;</span><br><span class="line">   <span class="comment">//九宫格控件设置数据适配器(等同ListView数据适配器)</span></span><br><span class="line">   gv_home.setAdapter(<span class="keyword">new</span> MyAdapter());</span><br><span class="line">   <span class="comment">//注册九宫格单个条目点击事件</span></span><br><span class="line">   gv_home.setOnItemClickListener(<span class="keyword">new</span> OnItemClickListener() &#123;</span><br><span class="line">      <span class="comment">//点中列表条目索引position</span></span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onItemClick</span><span class="params">(AdapterView&lt;?&gt; parent, View view,<span class="keyword">int</span> position, <span class="keyword">long</span> id)</span> </span>&#123;</span><br><span class="line">         </span><br><span class="line">      &#125;</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="获取空间内存（运存）大小"><a href="#获取空间内存（运存）大小" class="headerlink" title="获取空间内存（运存）大小"></a>获取空间内存（运存）大小</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> ctx  </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 返回可用的内存数    bytes</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">long</span> <span class="title">getAvailSpace</span><span class="params">(Context ctx)</span></span>&#123;</span><br><span class="line">   <span class="comment">//1,获取activityManager</span></span><br><span class="line">   ActivityManager am = (ActivityManager) ctx.getSystemService(Context.ACTIVITY_SERVICE);</span><br><span class="line">   <span class="comment">//2,构建存储可用内存的对象</span></span><br><span class="line">   MemoryInfo memoryInfo = <span class="keyword">new</span> MemoryInfo();</span><br><span class="line">   <span class="comment">//3,给memoryInfo对象赋(可用内存)值</span></span><br><span class="line">   am.getMemoryInfo(memoryInfo);</span><br><span class="line">   <span class="comment">//4,获取memoryInfo中相应可用内存大小</span></span><br><span class="line">   <span class="keyword">return</span> memoryInfo.availMem;</span><br><span class="line">&#125;   </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> ctx  </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 返回总的内存数 单位为bytes 返回0说明异常</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">long</span> <span class="title">getTotalSpace</span><span class="params">(Context ctx)</span></span>&#123;</span><br><span class="line">   <span class="comment">/*//1,获取activityManager</span></span><br><span class="line"><span class="comment">   ActivityManager am = (ActivityManager) ctx.getSystemService(Context.ACTIVITY_SERVICE);</span></span><br><span class="line"><span class="comment">   //2,构建存储可用内存的对象</span></span><br><span class="line"><span class="comment">   MemoryInfo memoryInfo = new MemoryInfo();</span></span><br><span class="line"><span class="comment">   //3,给memoryInfo对象赋(可用内存)值</span></span><br><span class="line"><span class="comment">   am.getMemoryInfo(memoryInfo);</span></span><br><span class="line"><span class="comment">   //4,获取memoryInfo中相应可用内存大小</span></span><br><span class="line"><span class="comment">   return memoryInfo.totalMem;*/</span></span><br><span class="line">   </span><br><span class="line">   <span class="comment">//内存大小写入文件中,读取proc/meminfo文件,读取第一行,获取数字字符,转换成bytes返回</span></span><br><span class="line">   FileReader fileReader  = <span class="keyword">null</span>;</span><br><span class="line">   BufferedReader bufferedReader = <span class="keyword">null</span>;</span><br><span class="line">   <span class="keyword">try</span> &#123;</span><br><span class="line">      fileReader= <span class="keyword">new</span> FileReader(<span class="string">"proc/meminfo"</span>);</span><br><span class="line">      bufferedReader = <span class="keyword">new</span> BufferedReader(fileReader);</span><br><span class="line">      String lineOne = bufferedReader.readLine();</span><br><span class="line">      <span class="comment">//将字符串转换成字符的数组</span></span><br><span class="line">      <span class="keyword">char</span>[] charArray = lineOne.toCharArray();</span><br><span class="line">      <span class="comment">//循环遍历每一个字符,如果此字符的ASCII码在0到9的区域内,说明此字符有效</span></span><br><span class="line">      StringBuffer stringBuffer = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">char</span> c : charArray) &#123;</span><br><span class="line">         <span class="keyword">if</span>(c&gt;=<span class="string">'0'</span> &amp;&amp; c&lt;=<span class="string">'9'</span>)&#123;</span><br><span class="line">            stringBuffer.append(c);</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> Long.parseLong(stringBuffer.toString())*<span class="number">1024</span>;</span><br><span class="line">   &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">   &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">         <span class="keyword">if</span>(fileReader!=<span class="keyword">null</span> &amp;&amp; bufferedReader!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            fileReader.close();</span><br><span class="line">            bufferedReader.close();</span><br><span class="line">         &#125;</span><br><span class="line">      &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">         e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="判断服务是否开启"><a href="#判断服务是否开启" class="headerlink" title="判断服务是否开启"></a>判断服务是否开启</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> ctx  上下文环境</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> serviceName 判断是否正在运行的服务</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> true 运行 false 没有运行</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isRunning</span><span class="params">(Context ctx,String serviceName)</span></span>&#123;</span><br><span class="line">   <span class="comment">//1,获取activityMananger管理者对象,可以去获取当前手机正在运行的所有服务</span></span><br><span class="line">   ActivityManager mAM = (ActivityManager) ctx.getSystemService(Context.ACTIVITY_SERVICE);</span><br><span class="line">   <span class="comment">//2,获取手机中正在运行的服务集合(多少个服务)</span></span><br><span class="line">   List&lt;RunningServiceInfo&gt; runningServices = mAM.getRunningServices(<span class="number">1000</span>);</span><br><span class="line">   <span class="comment">//3,遍历获取的所有的服务集合,拿到每一个服务的类的名称,和传递进来的类的名称作比对,如果一致,说明服务正在运行</span></span><br><span class="line">   <span class="keyword">for</span> (RunningServiceInfo runningServiceInfo : runningServices) &#123;</span><br><span class="line">      Log.i(tag, <span class="string">"runningServiceInfo.service.getClassName() = "</span>+runningServiceInfo.service.getClassName());</span><br><span class="line">      <span class="comment">//4,获取每一个真正运行服务的名称</span></span><br><span class="line">      <span class="keyword">if</span>(serviceName.equals(runningServiceInfo.service.getClassName()))&#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="多击事件"><a href="#多击事件" class="headerlink" title="多击事件"></a>多击事件</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">long</span>[] mHits = <span class="keyword">new</span> <span class="keyword">long</span>[<span class="number">3</span>];<span class="comment">//数组长度为点击次数</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 多次点击</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> view</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line">	<span class="comment">//		src 源数组</span></span><br><span class="line">	<span class="comment">//		srcPos 开始拷贝的位置</span></span><br><span class="line">	<span class="comment">//		dst 目标数组</span></span><br><span class="line">	<span class="comment">//		dstPos 目标数组的起始拷贝位置</span></span><br><span class="line">	<span class="comment">//		length 拷贝的数组长度</span></span><br><span class="line">	System.arraycopy(mHits, <span class="number">1</span>, mHits, <span class="number">0</span>, mHits.length - <span class="number">1</span>);<span class="comment">//拷贝数组</span></span><br><span class="line">	mHits[mHits.length - <span class="number">1</span>] = SystemClock.uptimeMillis();</span><br><span class="line">	<span class="keyword">if</span> (mHits[<span class="number">0</span>] &gt;= (SystemClock.uptimeMillis() - <span class="number">500</span>)) &#123;</span><br><span class="line">		System.out.println(<span class="string">"是男人!!!"</span>);</span><br><span class="line">		mHits = <span class="keyword">new</span> <span class="keyword">long</span>[<span class="number">3</span>];</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://oxy.pub/2015/09/08/AndroidTinyPoint/" data-id="cjhsq970w0002xffyiaahxbdj" class="article-share-link">分享到</a><div class="tags"><a href="/tags/Android/">Android</a></div><div class="post-nav"><a href="/2016/03/08/CocoaPods/" class="pre">CocoaPods安装流程</a><a href="/2015/06/01/iOSTinyPoint/" class="next">iOS小知识点集锦</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://oxy.pub"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/">PHP</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/">iOS</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Swift/" style="font-size: 15px;">Swift</a> <a href="/tags/Android/" style="font-size: 15px;">Android</a> <a href="/tags/github/" style="font-size: 15px;">github</a> <a href="/tags/Objective-C/" style="font-size: 15px;">Objective-C</a> <a href="/tags/MyBatis/" style="font-size: 15px;">MyBatis</a> <a href="/tags/Git/" style="font-size: 15px;">Git</a> <a href="/tags/PHP/" style="font-size: 15px;">PHP</a> <a href="/tags/SSM/" style="font-size: 15px;">SSM</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/05/10/macPHPConfig/">Mac系统下配置PHP运行环境</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/09/gitOperate/">Git命令行操作步骤</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/07/PLPlayerPackaging/">基于七牛播放器PLPlayer的二次封装(全屏) 以及七牛iOS播放器各个版本的问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/01/niplayer/">一句话实现AVPlayer视频播放</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/11/Alamofire/">Alamofire4.4 网络请求的封装</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/11/GithubCode/">github优秀资源(iOS/Android/Java)</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/08/autoRotate/">iOS状态栏旋转问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/26/Gradle-MyBatisGenerator/">Intellij IDEA 中结合 Gradle 使用 MyBatis Generator 逆向生成代码</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/24/ssm2/">intellij idea 2016 gradle搭建 spring + springMVC + mybatis 框架</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/22/ssm1/">intellij idea 2016 gradle搭建web工程</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://github.com/enamor" title="Github" target="_blank">Github</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">O₂.</a><a rel="nofollow" target="_blank" href="https://oxy.pub"> nina.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>